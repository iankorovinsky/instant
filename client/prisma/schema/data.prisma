// Market Data Models

enum instrument_type {
  bill
  note
  bond
  tips
}

model Instrument {
  id                String   @id @default(uuid())
  cusip             String   @unique
  name              String
  ticker            String
  type              instrument_type
  coupon            Decimal  @db.Decimal(10, 4)
  issueDate         DateTime
  maturityDate      DateTime
  couponFrequency   Int
  askModifiedDuration    Decimal  @db.Decimal(12, 9)
  bidModifiedDuration    Decimal  @db.Decimal(12, 9)
  askYieldToMaturity     Decimal  @db.Decimal(10, 8)
  askPrice               Decimal  @db.Decimal(10, 4)
  maturityType           String
  issuedAmount           BigInt
  outstandingAmount      BigInt
  currency               String
  
  // Optional fields
  standardPoorRating   String?
  moodyRating            String?
  fitchRating            String?
  dbrsRating             String?
  series                 String?
  bloombergCompositeRating String?
  announce               String?
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("instruments")
}

model YieldCurve {
  id         String   @id @default(uuid())
  asOfDate   DateTime
  tenor      String
  parYield   Decimal  @db.Decimal(10, 8)
  ingestedAt DateTime @default(now())

  @@unique([asOfDate, tenor])
  @@map("yield_curves")
  @@index([asOfDate])
}